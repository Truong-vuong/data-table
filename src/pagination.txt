import { getData } from './callAPI.js';
import { renderAll } from './renderAll.js'

function renderPagination() {
    getData()
        .then(blogs => {
            function curerntPageAcitive() {
                page.innerHTML = `<p>${currentPage}</p>`
            };
            curerntPageAcitive();

            function renderBtnReload(start, end) {
                btnReload.innerHTML = `<span>${start+1}</span>-<span>${end}</span>/<span>${blogs.length}</span>`;
            };
            renderBtnReload(0, 10);

            function nextPage() {
                btnNext.addEventListener('click', function() {
                    totalPage = Math.round(Math.ceil(blogs.length) / perPage);
                    if (currentPage >= totalPage) {
                        currentPage = totalPage;
                        curerntPageAcitive();
                        renderAll()
                        renderBtnReload((currentPage - 1) * perPage, blogs.length);
                    } else {
                        currentPage++;
                        renderAll()
                        renderBtnReload((currentPage - 1) * perPage, currentPage * perPage);
                    }
                })
            };
            nextPage();
        })
        .catch(function(err) {
            console.log("Have Error while Pagination");
        })
};

export { renderPagination };